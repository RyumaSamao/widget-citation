<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Page Privée</title>
<style>
  body { 
    font-family: Arial, sans-serif; 
    text-align: center; 
    margin-top: 50px; 
    background-color: #1E1E1E; /* mode sombre comme les citations */
    color: #191919;
  }
  #passwordDiv, #notionButton { display: none; }
  #passwordDiv { 
    background-color: #1E1E1E; /* fond invisible pour ton frère */
    padding: 15px 20px;
    border-radius: 6px;
    display: inline-block;
  }
  input { 
    padding: 6px; 
    font-size: 15px; 
    border-radius: 4px; 
    border: 1px solid #555; 
    background-color: #2A2A2A; 
    color: #FFFFFF;
  }
  button { 
    padding: 6px 12px; 
    font-size: 15px; 
    cursor: pointer; 
    border-radius: 4px; 
    border: 1px solid #555; 
    background-color: #2A2A2A;
    color: #FFFFFF;
  }
  #errorMsg { color: #FF5555; margin-top: 5px; font-size: 14px; }
</style>
</head>
<body>

<div id="passwordDiv">
  <input type="password" id="passwordInput" placeholder="Mot de passe"/>
  <button onclick="checkPassword()">Valider</button>
  <p id="errorMsg"></p>
</div>

<button id="notionButton" onclick="openNotion()">Ouvrir Notion</button>

<script>
  // --- À MODIFIER ---
  const expectedHash = "38cd641b99c40364e9b3e85467218fda2c3ad4959fc33384f0a59f23bd1b0c57"; // ton hash SHA-256 du mot de passe
  const notionLink = "https://www.notion.so/Test-html-2a4ee35fbb8e80ca8fb7d85b7ee512de"; // lien public Notion
  const tokenKey = "ryu_browser_marker"; // clé pour reconnaitre ton navigateur
  const myToken = "0c7de4f5f40ba9e3ac6b1efe44e68d87"; // token généré dans ton navigateur
  // -------------------

  // fonction pour calculer SHA-256 en hex
  async function sha256hex(str) {
    const enc = new TextEncoder();
    const buf = await crypto.subtle.digest('SHA-256', enc.encode(str));
    return Array.from(new Uint8Array(buf)).map(b=>b.toString(16).padStart(2,'0')).join('');
  }

  // afficher champ mot de passe seulement si navigateur reconnu
  if(localStorage.getItem(tokenKey) === myToken) {
    document.getElementById('passwordDiv').style.display = "block";
  }

  // vérifier le mot de passe en comparant le hash
  async function checkPassword() {
    const input = document.getElementById('passwordInput').value;
    const errorMsg = document.getElementById('errorMsg');
    const h = await sha256hex(input);
    if(h === expectedHash) {
      document.getElementById('notionButton').style.display = "inline-block";
      errorMsg.textContent = "";
    } else {
      document.getElementById('notionButton').style.display = "none";
      errorMsg.textContent = "Mot de passe incorrect !";
    }
  }

  // ouvrir la page Notion dans un nouvel onglet
  function openNotion() {
    window.open(notionLink, "_blank");
  }
</script>

</body>
</html>
