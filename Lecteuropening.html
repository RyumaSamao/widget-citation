<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Lecteur Opening One Piece</title>
<link href="https://fonts.googleapis.com/css2?family=Bangers&display=swap" rel="stylesheet" />
<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  font-family: 'Bangers', cursive;
  background: #191919;
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
}

.player-wrap {
  width: 90%;
  max-width: 700px;
  background: rgba(0,0,0,0.6);
  padding: 25px 20px;
  border-radius: 12px;
  text-align: center;
  position: relative;
}

.background-img {
  position: fixed;
  top:0; left:0;
  width:100%;
  height:100%;
  object-fit: cover;
  z-index: -1;
  opacity: 0.25;
}

.title {
  font-size: clamp(24px,4vw,36px);
  margin-bottom: 20px;
}

audio { display: none; }

.controls {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 18px;
  margin-bottom: 15px;
}

button.control-btn {
  background: rgba(255,255,255,0.1);
  border: 2px solid white;
  color: white;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: background 0.3s, color 0.3s, transform 0.2s;
}
button.control-btn:hover {
  background: white;
  color: #191919;
  transform: scale(1.1);
}

.progress-container {
  width: 100%;
  background: rgba(255,255,255,0.2);
  height: 12px;
  border-radius: 6px;
  cursor: pointer;
  margin-bottom: 12px;
}
.progress-bar {
  width: 0%;
  height: 100%;
  background: #fff;
  border-radius: 6px;
}

.timer {
  font-size: 16px;
  margin-bottom: 10px;
}
svg { width: 24px; height: 24px; fill: currentColor; }
</style>
</head>
<body>

<img class="background-img" id="bgImg" src="" alt="Opening Background">

<div class="player-wrap">
  <div class="title" id="openingTitle">Opening Name</div>
  
  <div class="controls">
    <button id="prevOpening" class="control-btn" title="Opening précédent">
      <svg viewBox="0 0 24 24"><polygon points="16,6 8,12 16,18"/></svg>
    </button>
    <button id="back10" class="control-btn" title="Reculer 10 secondes">
      <svg viewBox="0 0 24 24"><polygon points="14,6 6,12 14,18"/><text x="16" y="16" font-size="10" fill="currentColor">10</text></svg>
    </button>
    <button id="playPause" class="control-btn" title="Play / Pause">
      <svg id="playIcon" viewBox="0 0 24 24"><polygon points="6,4 20,12 6,20"/></svg>
      <svg id="pauseIcon" viewBox="0 0 24 24" style="display:none"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
    </button>
    <button id="forward10" class="control-btn" title="Avancer 10 secondes">
      <svg viewBox="0 0 24 24"><polygon points="10,6 18,12 10,18"/><text x="2" y="16" font-size="10" fill="currentColor">10</text></svg>
    </button>
    <button id="nextOpening" class="control-btn" title="Opening suivant">
      <svg viewBox="0 0 24 24"><polygon points="8,6 16,12 8,18"/></svg>
    </button>
  </div>
  
  <div class="progress-container" id="progressContainer">
    <div class="progress-bar" id="progressBar"></div>
  </div>
  
  <div class="timer" id="timer">0:00 / 0:00</div>
  
  <audio id="audioPlayer"></audio>
</div>

<script>
const openings = [
  {name:"We Are!", file:"audios/WeAre.mp3", image:"images/WeAre.jpg"},
  {name:"Believe", file:"audios/Believe.mp3", image:"images/Believe.jpg"},
  {name:"Hikari e", file:"audios/Hikarie.mp3", image:"images/Hikarie.jpg"}
];

let currentIndex = 0;
const audio = document.getElementById('audioPlayer');
const playPauseBtn = document.getElementById('playPause');
const back10Btn = document.getElementById('back10');
const forward10Btn = document.getElementById('forward10');
const prevOpeningBtn = document.getElementById('prevOpening');
const nextOpeningBtn = document.getElementById('nextOpening');
const progressBar = document.getElementById('progressBar');
const progressContainer = document.getElementById('progressContainer');
const timerEl = document.getElementById('timer');
const titleEl = document.getElementById('openingTitle');
const bgImg = document.getElementById('bgImg');
const playIcon = document.getElementById('playIcon');
const pauseIcon = document.getElementById('pauseIcon');

function loadOpening(index){
  const op = openings[index];
  audio.src = op.file;
  titleEl.textContent = op.name;
  bgImg.src = op.image;
  progressBar.style.width = "0%";
}

function togglePlay(){
  if(audio.paused){
    audio.play();
    playIcon.style.display="none";
    pauseIcon.style.display="block";
  } else{
    audio.pause();
    playIcon.style.display="block";
    pauseIcon.style.display="none";
  }
}

function formatTime(seconds){
  const m = Math.floor(seconds/60);
  const s = Math.floor(seconds%60);
  return `${m}:${s<10?'0'+s:s}`;
}

audio.addEventListener('timeupdate', ()=>{
  const progress = (audio.currentTime/audio.duration)*100;
  progressBar.style.width = progress + "%";
  timerEl.textContent = `${formatTime(audio.currentTime)} / ${formatTime(audio.duration)}`;
});

progressContainer.addEventListener('click',(e)=>{
  const rect = progressContainer.getBoundingClientRect();
  const clickX = e.clientX - rect.left;
  const width = rect.width;
  audio.currentTime = (clickX/width)*audio.duration;
});

back10Btn.addEventListener('click', ()=>{ audio.currentTime = Math.max(0,audio.currentTime-10); });
forward10Btn.addEventListener('click', ()=>{ audio.currentTime = Math.min(audio.duration,audio.currentTime+10); });

prevOpeningBtn.addEventListener('click', ()=>{
  currentIndex = (currentIndex-1+openings.length)%openings.length;
  loadOpening(currentIndex);
  audio.play();
  playIcon.style.display="none";
  pauseIcon.style.display="block";
});

nextOpeningBtn.addEventListener('click', ()=>{
  currentIndex = (currentIndex+1)%openings.length;
  loadOpening(currentIndex);
  audio.play();
  playIcon.style.display="none";
  pauseIcon.style.display="block";
});

playPauseBtn.addEventListener('click', togglePlay);

loadOpening(currentIndex);
</script>

</body>
</html>
